## Требования 
нет

## Установка клиента

1. Откройте файл "codebattle-loderunner-clients/CodeBattleJS/CodeBattleJs.html" в любом браузере
## Запуск клиента и подключение к серверу игры

Сервер игры Load Runner (https://github.com/codenjoyme/codenjoy) работает по протоколу WebSocket.

Для подключения к игре Вам необходимо получить адрес (ссылку) вашей игровой комнаты (борды), котора будет выглядеть примерно так: 

http://some-server-address/codenjoy-contest/board/player/u1apyj3djrfgguunpxw0?code=2679320441167088196&gameName=loderunner 

где http://some-server-address будет путь до сервера и далее url содержащая id вашего игрока и начатой игры

В клиенте в файле **CodeBattleJs.html** (CodeBattleJS/CodeBattleJs.html) вы увидите строку **var gcb = new GameClient** в которой ссылку нужно изменить на свою: 

```javascript
var gcb = new GameClient("https://dojorena.io/codenjoy-contest/board/player/dojorena195?code=4709782870748562346")
```

После этого вы можете открыть этот файл в любом браузере и, таким образом, начать игру.


Пример ответа от Сервера игры, который приходит после соединения:

```javascript

☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼☼
☼ H ~~~~     ~~~~                      ~~~~~     ☼             ☼                 ☼
☼ H     ######  H###H  H  H############     ###H   H#########H   H#########H#####☼
☼#☼☼ #       #  H  ##H H H#                    ☼☼☼☼☼         ☼☼☼☼☼         H     ☼
☼    #       #  H  ####H## ~H###############                               H     ☼
☼ ☼☼###H#### #  H~~~~~~~ ~~ H #            #############H##################H~~~~~☼
☼    # H   # #  H           H # ~~~               ~~~~~~~~~~~~~            H #  H☼
☼#☼☼ # H   # ###H  ####H    H #    H#############H             H###########H #  H☼
☼    # H   #    H      H#######    H            ##H  ##☼☼☼##  H##  $       H #  H☼
☼ #### H   #####H#          # #### H~~~~H###### $##H         H##  #####H   H #  H☼
☼    # H ~~      #        ~~~~~~   H    H     ## ######☼☼☼###### ##    #######  H☼
☼~~  # H   H###H ########H      H##H ## H            ~~~~~~~           #   #    H☼
☼    # H   H#  H         ########       H###########         ###########~~~~~~~~H☼
☼ ~~ # H   H#  H                        H  ~~~~~~~            ~~~~~~~ (#    H    ☼
☼    # H   H###H########################H#H       H##########H        (#    H    ☼
☼~ ~~#######   H      $                 H######H  H          H#☼☼☼☼☼# ##### H ###☼
☼            H☼☼#☼☼H    H#########H     H#     H#####H#####H##( ~~~~~ #     H #$ ☼
☼  ##########H     H    H         H#####H#     H ~   H     H  Є~ (    #H#   H #H ☼
☼  ~~       #H#☼#☼#H    H$        H  ~~~ #####H#     H     H    ~Є    #H##### #H ☼
☼ H  ###H####H  ~  H~~~~H~~~~~~   H           H   H######H##      ~~   H      #H ☼
☼ H  ~~~H~~~#H     H    H     H###☼☼☼☼☼☼H☼    H~~~H      H          ######H## #H ☼
☼ H     H   #H     H    H#####H         H     H $    H#########H   ~~~ #  H    H ☼
☼ H     H   #☼###☼##☼##☼H         H###H##    H##     H#       ##          H H####☼
☼       H   #☼###☼~~~~  H         H   H######H######### H###H #####H####### H~~~ ☼
☼  ~~ ##### #☼(((☼      H   ~~~~~~H   H      H          H# #H      H        H    ☼
☼           #########H###☼☼☼☼     H  ############   ###### ###############~~H  ☼☼☼
☼~   ########        H            H                                         H    ☼

```


## Логику и то какие команды отправлять необходимо прописывать внутри метода **gcb.run(function(board) {}** в том же файле **CodeBattleJs.html**:

```javascript

    gcb.run(function(board) {
      var random = Math.floor(Math.random() * Object.keys(ACTIONS).length);
      return ACTIONS[Object.keys(ACTIONS)[random]];
    });

```
Вместо `ACTIONS[Object.keys(ACTIONS)[random]]` вы должны указать какую команду отправить на сервер в качестве вашего хода.

Полное описание механики игры и список команд можно найти в UI на сервере игры. А так же здесь: https://github.com/Insomnium/codenjoy/blob/master/CodingDojo/games/loderunner/src/main/webapp/resources/help/loderunner.html (та же самая информация, что в UI сервера)

ACTIONS (команды которые вы можете отправлять) в клиенте доступны в объекте ACTIONS в файле **CodeBattleJs.html**:

```javascript

    var ACTIONS = {
      GO_LEFT: 'left',
      GO_RIGHT: 'right',
      GO_UP: 'up',
      GO_DOWN: 'down',
      DRILL_LEFT: 'act,left',
      DRILL_RIGHT: 'act,right',
      SUICIDE: 'act(0)',
      DO_NOTHING: 'stop'
    };

```

Основной класс для получения информации об игровом поле - это Board файла **LoderunnerBoard.js**. 

### Список методов API для работы с координатами

**findAll** - Возвращает список координат для данного типа элемента.

**getAt** - Возвращает объект элемента в координатах x,y.

**hasElementAt** - Возвращает True,если элемент находится в координатах x, y.

**isBarrierAt** - Возвращает true,если барьер находится в точке x, y.

**myPosition** - Геттер, возвращает точку, в которой находится ваш герой.

**isGameOver** - Геттер, возвращает False, если ваш герой еще жив.

**enemyPositions** - Геттер, возвращает список очков для других героев.

**otherHeroPositions** - Геттер, возвращает список очков для других героев.

**shadowPills** - Геттер, возвращает список точек для элементов с типом 'THE_SHADOW_PILL'

**portals** - Геттер, возвращает список точек для элементов с типом 'PORTAL'

**wallPositions** - Геттер, возвращает список точек элементов стен.

**ladderPositions** - Геттер, возвращает набор точек лестницы

**goldPositions** - Геттер, возвращает список точек для элементов с типами YELLOW_GOLD, GREEN_GOLD, RED_GOLD

**pipePositions** - Геттер, возвращает набор точек pipe

**barriers** - Геттер, возвращает список точек барьеров.


### Список методов API для работы с элементами комнаты

**isNearToElement** - Проверить, существует ли рядом элемент выбранного типа

**hasEnemyAt** - возвращает bool, если враг существует в текущей точке

**hasOtherHeroAt** - возвращает bool, если другой герой существует в текущей точке

**hasWallAt** - возвращает bool, если стена существует в текущей точке

**hasLadderAt** - возвращает bool, если лестница существует в текущей точке

**hasGoldAt** - возвращает bool, если золото существует в текущей точке

**hasPipeAt** - возвращает bool, если pipe существует в текущей точке

**hasShadowAt** - возвращает bool, если тень существует в текущей точке

**getCountElementsNearToPoint** - подсчитывает количество появлений элемента поблизости


### Список доступных Действий

**GO_LEFT = "left"** - передвижение игрока влево

**GO_RIGHT = "right"** - передвижение игрока вправо

**GO_UP = "up"** - передвижение игрока вверх по лестнице

**GO_DOWN = "down"** - передвижение игрока вниз

**DRILL_RIGHT = "act,right"** - просверлить отверстие вправо

**DRILL_LEFT = "act,left"** - просверлить отверстие влево /
**Если игрок будет использовать только одну команду ACT то отверстие просверлится в направлении, куда смотрит герой.** 

**DO_NOTHING = "stop"** - остановиться

**SUICIDE = "act(0)"** - завершить игру
